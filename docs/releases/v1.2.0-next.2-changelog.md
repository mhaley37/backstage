# Release v1.2.0-next.2

## @backstage/backend-tasks@0.3.1-next.1

### Patch Changes

- 73480846dd: `TaskScheduleDefinition` has been updated to also accept an options object containing duration information in the form of days, hours, seconds and so on. This allows for scheduling without importing `luxon`.

  ```diff
  -import { Duration } from 'luxon';
  // omitted other code

  const schedule = env.scheduler.createScheduledTaskRunner({
  -  frequency: Duration.fromObject({ minutes: 10 }),
  -  timeout: Duration.fromObject({ minutes: 15 }),
  +  frequency: { minutes: 10 },
  +  timeout: { minutes: 15 },
     // omitted other code
  });
  ```

## @backstage/cli@0.17.1-next.2

### Patch Changes

- 632be18bbc: Updated `create-github-app` command to prompt for read or write permissions to simplify setup.

## @backstage/create-app@0.4.27-next.2

### Patch Changes

- 73480846dd: Simplified the search collator scheduling by removing the need for the `luxon` dependency.

  For existing installations the scheduling can be simplified by removing the `luxon` dependency and using the human friendly duration object instead.
  Please note that this only applies if luxon is not used elsewhere in your installation.

  `packages/backend/package.json`

  ```diff
       "express": "^4.17.1",
       "express-promise-router": "^4.1.0",
  -    "luxon": "^2.0.2",
  ```

  `packages/backend/src/plugins/search.ts`

  ```diff
   import { Router } from 'express';
  -import { Duration } from 'luxon';

   // omitted other code

     const schedule = env.scheduler.createScheduledTaskRunner({
  -    frequency: Duration.fromObject({ minutes: 10 }),
  -    timeout: Duration.fromObject({ minutes: 15 }),
  +    frequency: { minutes: 10 },
  +    timeout: { minutes: 15 },
       // A 3 second delay gives the backend server a chance to initialize before
       // any collators are executed, which may attempt requests against the API.
  -    initialDelay: Duration.fromObject({ seconds: 3 }),
  +    initialDelay: { seconds: 3 },
     });
  ```

- 7cda923c16: Tweaked the `.dockerignore` file so that it's easier to add additional backend packages if desired.

  To apply this change to an existing app, make the following change to `.dockerignore`:

  ```diff
   cypress
   microsite
   node_modules
  -packages
  -!packages/backend/dist
  +packages/*/src
  +packages/*/node_modules
   plugins
  ```

## @backstage/plugin-catalog-backend-module-github@0.1.3-next.1

### Patch Changes

- a7de43f648: `GitHubOrgEntityProvider.fromConfig` now supports a `schedule` option like other
  entity providers, that makes it more convenient to leverage using the common
  task scheduler.

  If you want to use this in your own project, it is used something like the following:

  ```ts
  // In packages/backend/src/plugins/catalog.ts
  builder.addEntityProvider(
    GitHubOrgEntityProvider.fromConfig(env.config, {
      id: 'production',
      orgUrl: 'https://github.com/backstage',
      schedule: env.scheduler.createScheduledTaskRunner({
        frequency: { cron: '*/30 * * * *' },
        timeout: { minutes: 10 },
      }),
      logger: env.logger,
    }),
  );
  ```

- Updated dependencies
  - @backstage/backend-tasks@0.3.1-next.1
